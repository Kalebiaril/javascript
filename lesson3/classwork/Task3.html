<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Task 3</title>
    <link rel="stylesheet" href="css/normalize.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="wrap" id="wrap">
      <h1>Переключение слайдера</h1>
      <div class="roadMap__container yellow">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint ball" data-id="2"></div>
          <div class="roadMapPoint" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container red">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint" data-id="2"></div>
          <div class="roadMapPoint ball" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

      <div class="roadMap__container blue">
        <button class="navButton" data-direction="<"> Prev </button>
        <div class="roadMap">
          <div class="roadMapPoint" data-id="1"></div>
          <div class="roadMapPoint ball" data-id="2"></div>
          <div class="roadMapPoint" data-id="3"></div>
          <div class="roadMapPoint" data-id="4"></div>
        </div>
        <button class="navButton" data-direction=">"> Next </button>
      </div>

    </div>
    <script>
      function moveNext(event){
        let container = event.target.parentElement;
        let ball = container.querySelector('.ball'); 
        ball.classList.remove("ball");
        let nextPlace = ball.dataset.id < 4 ? Number(ball.dataset.id)+1 : 1;
        let ballLocation = container.querySelector(`[data-id="${nextPlace}"]`);
        ballLocation.classList.add("ball");

      }

      function movePrevious(event){      
        let container = event.target.parentElement;
        let ball = container.querySelector('.ball'); 
        ball.classList.remove("ball");
        let nextPlace = ball.dataset.id == 1 ? 4 : Number(ball.dataset.id)-1;
        let ballLocation = container.querySelector(`[data-id="${nextPlace}"]`);
        ballLocation.classList.add("ball");
      }
      var nextButtons = document.querySelectorAll("[data-direction='>']");
      var previousButtons = document.querySelectorAll("[data-direction='<']");
      Array.from(nextButtons).forEach((button)=>{
        button.addEventListener("click", moveNext);        
      });
      Array.from(previousButtons).forEach((button)=>{
        button.addEventListener("click", movePrevious);        
      });
      var containers = document.querySelectorAll('.roadMap__container');
          containers.forEach( function( container ){
            console.log( container );
            var ball = container.querySelector('.ball');
            console.log( ball.dataset.id );
          })

    </script>
  </body>


</html>
